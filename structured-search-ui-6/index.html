<!DOCTYPE html><html lang="en"><head><meta charSet="utf-8"/><meta http-equiv="x-ua-compatible" content="ie=edge"/><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"/><style id="typography.js">html{font-family:sans-serif;-ms-text-size-adjust:100%;-webkit-text-size-adjust:100%}body{margin:0}article,aside,details,figcaption,figure,footer,header,main,menu,nav,section,summary{display:block}audio,canvas,progress,video{display:inline-block}audio:not([controls]){display:none;height:0}progress{vertical-align:baseline}[hidden],template{display:none}a{background-color:transparent;-webkit-text-decoration-skip:objects}a:active,a:hover{outline-width:0}abbr[title]{border-bottom:none;text-decoration:underline;text-decoration:underline dotted}b,strong{font-weight:inherit;font-weight:bolder}dfn{font-style:italic}h1{font-size:2em;margin:.67em 0}mark{background-color:#ff0;color:#000}small{font-size:80%}sub,sup{font-size:75%;line-height:0;position:relative;vertical-align:baseline}sub{bottom:-.25em}sup{top:-.5em}img{border-style:none}svg:not(:root){overflow:hidden}code,kbd,pre,samp{font-family:monospace,monospace;font-size:1em}figure{margin:1em 40px}hr{box-sizing:content-box;height:0;overflow:visible}button,input,optgroup,select,textarea{font:inherit;margin:0}optgroup{font-weight:700}button,input{overflow:visible}button,select{text-transform:none}[type=reset],[type=submit],button,html [type=button]{-webkit-appearance:button}[type=button]::-moz-focus-inner,[type=reset]::-moz-focus-inner,[type=submit]::-moz-focus-inner,button::-moz-focus-inner{border-style:none;padding:0}[type=button]:-moz-focusring,[type=reset]:-moz-focusring,[type=submit]:-moz-focusring,button:-moz-focusring{outline:1px dotted ButtonText}fieldset{border:1px solid silver;margin:0 2px;padding:.35em .625em .75em}legend{box-sizing:border-box;color:inherit;display:table;max-width:100%;padding:0;white-space:normal}textarea{overflow:auto}[type=checkbox],[type=radio]{box-sizing:border-box;padding:0}[type=number]::-webkit-inner-spin-button,[type=number]::-webkit-outer-spin-button{height:auto}[type=search]{-webkit-appearance:textfield;outline-offset:-2px}[type=search]::-webkit-search-cancel-button,[type=search]::-webkit-search-decoration{-webkit-appearance:none}::-webkit-input-placeholder{color:inherit;opacity:.54}::-webkit-file-upload-button{-webkit-appearance:button;font:inherit}html{font:100%/1.5 'Lora',serif;box-sizing:border-box;overflow-y:scroll;}*{box-sizing:inherit;}*:before{box-sizing:inherit;}*:after{box-sizing:inherit;}body{color:hsla(0,0%,0%,0.8);font-family:'Lora',serif;font-weight:normal;word-wrap:break-word;font-kerning:normal;-moz-font-feature-settings:"kern", "liga", "clig", "calt";-ms-font-feature-settings:"kern", "liga", "clig", "calt";-webkit-font-feature-settings:"kern", "liga", "clig", "calt";font-feature-settings:"kern", "liga", "clig", "calt";}img{max-width:100%;margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.5rem;}h1{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.5rem;color:inherit;font-family:'Lora',serif;font-weight:bold;text-rendering:optimizeLegibility;font-size:2rem;line-height:1.1;}h2{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.5rem;color:inherit;font-family:'Lora',serif;font-weight:bold;text-rendering:optimizeLegibility;font-size:1.51572rem;line-height:1.1;}h3{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.5rem;color:inherit;font-family:'Lora',serif;font-weight:bold;text-rendering:optimizeLegibility;font-size:1.31951rem;line-height:1.1;}h4{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.5rem;color:inherit;font-family:'Lora',serif;font-weight:bold;text-rendering:optimizeLegibility;font-size:1rem;line-height:1.1;}h5{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.5rem;color:inherit;font-family:'Lora',serif;font-weight:bold;text-rendering:optimizeLegibility;font-size:0.87055rem;line-height:1.1;}h6{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.5rem;color:inherit;font-family:'Lora',serif;font-weight:bold;text-rendering:optimizeLegibility;font-size:0.81225rem;line-height:1.1;}hgroup{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.5rem;}ul{margin-left:1.5rem;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.5rem;list-style-position:outside;list-style-image:none;}ol{margin-left:1.5rem;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.5rem;list-style-position:outside;list-style-image:none;}dl{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.5rem;}dd{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.5rem;}p{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.5rem;}figure{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.5rem;}pre{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.5rem;font-size:0.85rem;line-height:1.5rem;}table{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.5rem;font-size:1rem;line-height:1.5rem;border-collapse:collapse;width:100%;}fieldset{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.5rem;}blockquote{margin-left:1.5rem;margin-right:1.5rem;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.5rem;}form{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.5rem;}noscript{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.5rem;}iframe{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.5rem;}hr{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:calc(1.5rem - 1px);background:hsla(0,0%,0%,0.2);border:none;height:1px;}address{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.5rem;}b{font-weight:bold;}strong{font-weight:bold;}dt{font-weight:bold;}th{font-weight:bold;}li{margin-bottom:calc(1.5rem / 2);}ol li{padding-left:0;}ul li{padding-left:0;}li > ol{margin-left:1.5rem;margin-bottom:calc(1.5rem / 2);margin-top:calc(1.5rem / 2);}li > ul{margin-left:1.5rem;margin-bottom:calc(1.5rem / 2);margin-top:calc(1.5rem / 2);}blockquote *:last-child{margin-bottom:0;}li *:last-child{margin-bottom:0;}p *:last-child{margin-bottom:0;}li > p{margin-bottom:calc(1.5rem / 2);}code{font-size:0.85rem;line-height:1.5rem;}kbd{font-size:0.85rem;line-height:1.5rem;}samp{font-size:0.85rem;line-height:1.5rem;}abbr{border-bottom:1px dotted hsla(0,0%,0%,0.5);cursor:help;}acronym{border-bottom:1px dotted hsla(0,0%,0%,0.5);cursor:help;}abbr[title]{border-bottom:1px dotted hsla(0,0%,0%,0.5);cursor:help;text-decoration:none;}thead{text-align:left;}td,th{text-align:left;border-bottom:1px solid hsla(0,0%,0%,0.12);font-feature-settings:"tnum";-moz-font-feature-settings:"tnum";-ms-font-feature-settings:"tnum";-webkit-font-feature-settings:"tnum";padding-left:1rem;padding-right:1rem;padding-top:0.75rem;padding-bottom:calc(0.75rem - 1px);}th:first-child,td:first-child{padding-left:0;}th:last-child,td:last-child{padding-right:0;}</style><meta name="generator" content="Gatsby 5.14.1"/><meta name="theme-color" content="#663399"/><meta data-react-helmet="true" name="description" content="We’ll hand-wave a few things — typeahead and popover behaviour are fairly easy to solve — in favour of covering the challenges that were specific to…"/><meta data-react-helmet="true" property="og:title" content="Structured search queries for web UIs, part 6: the interface, features"/><meta data-react-helmet="true" property="og:description" content="We’ll hand-wave a few things — typeahead and popover behaviour are fairly easy to solve — in favour of covering the challenges that were specific to…"/><meta data-react-helmet="true" property="og:type" content="website"/><meta data-react-helmet="true" name="twitter:card" content="summary"/><meta data-react-helmet="true" name="twitter:creator" content="Jonathon Herbert"/><meta data-react-helmet="true" name="twitter:title" content="Structured search queries for web UIs, part 6: the interface, features"/><meta data-react-helmet="true" name="twitter:description" content="We’ll hand-wave a few things — typeahead and popover behaviour are fairly easy to solve — in favour of covering the challenges that were specific to…"/><style data-href="/styles.500f0c80309ab4209ed5.css" data-identity="gatsby-global-css">@font-face{font-display:swap;font-family:Patua One;font-style:normal;font-weight:400;src:local("Patua One Regular "),local("Patua One-Regular"),url(/static/patua-one-latin-400-04538b4949ee084d70b5a5f22c16097b.woff2) format("woff2"),url(/static/patua-one-latin-400-944b1f7fff7ece8f6d5f84414536a6a3.woff) format("woff")}@font-face{font-display:swap;font-family:Open Sans;font-style:normal;font-weight:300;src:local("Open Sans Light "),local("Open Sans-Light"),url(/static/open-sans-latin-300-b871ad6e5cbe2a1c8c7362c81a234f93.woff2) format("woff2"),url(/static/open-sans-latin-300-38bcfba2c37aac23453faf21d14511fb.woff) format("woff")}@font-face{font-display:swap;font-family:Open Sans;font-style:italic;font-weight:300;src:local("Open Sans Light italic"),local("Open Sans-Lightitalic"),url(/static/open-sans-latin-300italic-b45d9997b704ab3daad1b5624eec1ad1.woff2) format("woff2"),url(/static/open-sans-latin-300italic-3ab0502d6136886180cdae3e714e30a3.woff) format("woff")}@font-face{font-display:swap;font-family:Open Sans;font-style:normal;font-weight:400;src:local("Open Sans Regular "),local("Open Sans-Regular"),url(/static/open-sans-latin-400-f57a62e9efddf6ace18b15572f81905b.woff2) format("woff2"),url(/static/open-sans-latin-400-347639ec49f4b2884a9657afded83ace.woff) format("woff")}@font-face{font-display:swap;font-family:Open Sans;font-style:italic;font-weight:400;src:local("Open Sans Regular italic"),local("Open Sans-Regularitalic"),url(/static/open-sans-latin-400italic-bb915319f59c02c348a615ad483772e7.woff2) format("woff2"),url(/static/open-sans-latin-400italic-56bdf84751634e8deaff10d1d68df316.woff) format("woff")}@font-face{font-display:swap;font-family:Open Sans;font-style:normal;font-weight:600;src:local("Open Sans SemiBold "),local("Open Sans-SemiBold"),url(/static/open-sans-latin-600-9526470852428b4340ed994462821463.woff2) format("woff2"),url(/static/open-sans-latin-600-7e06644bbdc83069cec8d396149da3ab.woff) format("woff")}@font-face{font-display:swap;font-family:Open Sans;font-style:italic;font-weight:600;src:local("Open Sans SemiBold italic"),local("Open Sans-SemiBolditalic"),url(/static/open-sans-latin-600italic-cc4bf5b2955147801c024b2b118f4a5c.woff2) format("woff2"),url(/static/open-sans-latin-600italic-8d513ad94829ef391cd18d4a83bcfc4b.woff) format("woff")}@font-face{font-display:swap;font-family:Open Sans;font-style:normal;font-weight:700;src:local("Open Sans Bold "),local("Open Sans-Bold"),url(/static/open-sans-latin-700-92425c623934facef057b0cfe2e13f95.woff2) format("woff2"),url(/static/open-sans-latin-700-f24f4bcef8a4a0eb6345d292b85dc7fe.woff) format("woff")}@font-face{font-display:swap;font-family:Open Sans;font-style:italic;font-weight:700;src:local("Open Sans Bold italic"),local("Open Sans-Bolditalic"),url(/static/open-sans-latin-700italic-2a0783bd1c6c1469558bfa573cfa0c0c.woff2) format("woff2"),url(/static/open-sans-latin-700italic-e961bdb476db6860f20ff571a84a55b0.woff) format("woff")}@font-face{font-display:swap;font-family:Open Sans;font-style:normal;font-weight:800;src:local("Open Sans ExtraBold "),local("Open Sans-ExtraBold"),url(/static/open-sans-latin-800-1666787ea3ff3941e7641817eb9edc94.woff2) format("woff2"),url(/static/open-sans-latin-800-8ab0bbdd48f276f4ba5652b27ae59210.woff) format("woff")}@font-face{font-display:swap;font-family:Open Sans;font-style:italic;font-weight:800;src:local("Open Sans ExtraBold italic"),local("Open Sans-ExtraBolditalic"),url(/static/open-sans-latin-800italic-b5bc26612cdf4d47affd6988bcdc8c0f.woff2) format("woff2"),url(/static/open-sans-latin-800italic-3d3bd0835c258f5bd0bce57bb1963a9c.woff) format("woff")}code[class*=language-],pre[class*=language-]{word-wrap:normal;background:none;color:#000;font-family:Consolas,Monaco,Andale Mono,Ubuntu Mono,monospace;font-size:1em;-webkit-hyphens:none;hyphens:none;line-height:1.5;tab-size:4;text-align:left;text-shadow:0 1px #fff;white-space:pre;word-break:normal;word-spacing:normal}code[class*=language-] ::selection,code[class*=language-]::selection,pre[class*=language-] ::selection,pre[class*=language-]::selection{background:#b3d4fc;text-shadow:none}@media print{code[class*=language-],pre[class*=language-]{text-shadow:none}}pre[class*=language-]{margin:.5em 0;overflow:auto;padding:1em}:not(pre)>code[class*=language-],pre[class*=language-]{background:#f5f2f0}:not(pre)>code[class*=language-]{border-radius:.3em;padding:.1em;white-space:normal}.token.cdata,.token.comment,.token.doctype,.token.prolog{color:#708090}.token.punctuation{color:#999}.token.namespace{opacity:.7}.token.boolean,.token.constant,.token.deleted,.token.number,.token.property,.token.symbol,.token.tag{color:#905}.token.attr-name,.token.builtin,.token.char,.token.inserted,.token.selector,.token.string{color:#690}.language-css .token.string,.style .token.string,.token.entity,.token.operator,.token.url{background:hsla(0,0%,100%,.5);color:#9a6e3a}.token.atrule,.token.attr-value,.token.keyword{color:#07a}.token.class-name,.token.function{color:#dd4a68}.token.important,.token.regex,.token.variable{color:#e90}.token.bold,.token.important{font-weight:700}.token.italic{font-style:italic}.token.entity{cursor:help}#___gatsby,#gatsby-focus-wrapper,body,html{height:100%}code[class*=language-],pre[class*=language-]{font-size:13px}blockquote{border-left:3px solid #ddd;font-style:italic;margin-left:0;padding-left:1rem}.gatsby-highlight{margin-bottom:1.5rem}p:has(>svg[id^=mermaid-]){align-items:center;display:flex;flex-direction:column}#mermaid-0{font-size:15px!important}</style><style>.gatsby-image-wrapper{position:relative;overflow:hidden}.gatsby-image-wrapper picture.object-fit-polyfill{position:static!important}.gatsby-image-wrapper img{bottom:0;height:100%;left:0;margin:0;max-width:none;padding:0;position:absolute;right:0;top:0;width:100%;object-fit:cover}.gatsby-image-wrapper [data-main-image]{opacity:0;transform:translateZ(0);transition:opacity .25s linear;will-change:opacity}.gatsby-image-wrapper-constrained{display:inline-block;vertical-align:top}</style><noscript><style>.gatsby-image-wrapper noscript [data-main-image]{opacity:1!important}.gatsby-image-wrapper [data-placeholder-image]{opacity:0!important}</style></noscript><script type="module">const e="undefined"!=typeof HTMLImageElement&&"loading"in HTMLImageElement.prototype;e&&document.body.addEventListener("load",(function(e){const t=e.target;if(void 0===t.dataset.mainImage)return;if(void 0===t.dataset.gatsbyImageSsr)return;let a=null,n=t;for(;null===a&&n;)void 0!==n.parentNode.dataset.gatsbyImageWrapper&&(a=n.parentNode),n=n.parentNode;const o=a.querySelector("[data-placeholder-image]"),r=new Image;r.src=t.currentSrc,r.decode().catch((()=>{})).then((()=>{t.style.opacity=1,o&&(o.style.opacity=0,o.style.transition="opacity 500ms linear")}))}),!0);</script><link rel="icon" href="/favicon-32x32.png?v=f7bf0777384d9abebe3b16718e63334d" type="image/png"/><link rel="manifest" href="/manifest.webmanifest" crossorigin="anonymous"/><link rel="apple-touch-icon" sizes="48x48" href="/icons/icon-48x48.png?v=f7bf0777384d9abebe3b16718e63334d"/><link rel="apple-touch-icon" sizes="72x72" href="/icons/icon-72x72.png?v=f7bf0777384d9abebe3b16718e63334d"/><link rel="apple-touch-icon" sizes="96x96" href="/icons/icon-96x96.png?v=f7bf0777384d9abebe3b16718e63334d"/><link rel="apple-touch-icon" sizes="144x144" href="/icons/icon-144x144.png?v=f7bf0777384d9abebe3b16718e63334d"/><link rel="apple-touch-icon" sizes="192x192" href="/icons/icon-192x192.png?v=f7bf0777384d9abebe3b16718e63334d"/><link rel="apple-touch-icon" sizes="256x256" href="/icons/icon-256x256.png?v=f7bf0777384d9abebe3b16718e63334d"/><link rel="apple-touch-icon" sizes="384x384" href="/icons/icon-384x384.png?v=f7bf0777384d9abebe3b16718e63334d"/><link rel="apple-touch-icon" sizes="512x512" href="/icons/icon-512x512.png?v=f7bf0777384d9abebe3b16718e63334d"/><title data-react-helmet="true">Structured search queries for web UIs, part 6: the interface, features | jsh</title><link data-react-helmet="true" rel="preconnect" href="https://fonts.googleapis.com"/><link data-react-helmet="true" rel="preconnect" href="https://fonts.gstatic.com"/><link data-react-helmet="true" rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Lora:ital,wght@0,400..700;1,400..700&amp;display=swap"/></head><body><div id="___gatsby"><div style="outline:none" tabindex="-1" id="gatsby-focus-wrapper"><div style="display:flex;min-height:100%;flex-direction:column;margin-left:auto;margin-right:auto;max-width:54rem;padding:2.25rem 1.125rem"><header><h3 style="margin-top:0"><a style="box-shadow:none;text-decoration:none;color:inherit" href="/">jsh</a></h3></header><main><article><header><h1 style="margin-top:1.5rem;margin-bottom:0">Structured search queries for web UIs, part 6: the interface, features</h1><p style="font-size:0.87055rem;line-height:1.5rem;display:block;margin-bottom:1.5rem"><i>February 23, 2026</i></p></header><section><p>We’ll hand-wave a few things — typeahead and popover behaviour are fairly easy to solve — in favour of covering the challenges that were specific to representing our query language in a structured, editable UI.</p>
<p>Every time we receive new input from the editor, we’ll want to parse the new document we receive as a result of the input, and transform that <em>back</em> into a ProseMirror document again, ensuring our input reflects our parsed output. If the parse fails, we can simply accept the input as it stood, keeping the error information to display to the user.</p>
<p>// Full parse workflow</p>
<p><svg id="mermaid-0" width="100%" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" class="flowchart" style="max-width: 393.5px;" viewBox="0 0 393.5 955.375" role="graphics-document document" aria-roledescription="flowchart-v2"><style>#mermaid-0{font-family:arial,sans-serif;font-size:16px;fill:#000000;}@keyframes edge-animation-frame{from{stroke-dashoffset:0;}}@keyframes dash{to{stroke-dashoffset:0;}}#mermaid-0 .edge-animation-slow{stroke-dasharray:9,5!important;stroke-dashoffset:900;animation:dash 50s linear infinite;stroke-linecap:round;}#mermaid-0 .edge-animation-fast{stroke-dasharray:9,5!important;stroke-dashoffset:900;animation:dash 20s linear infinite;stroke-linecap:round;}#mermaid-0 .error-icon{fill:#552222;}#mermaid-0 .error-text{fill:#552222;stroke:#552222;}#mermaid-0 .edge-thickness-normal{stroke-width:1px;}#mermaid-0 .edge-thickness-thick{stroke-width:3.5px;}#mermaid-0 .edge-pattern-solid{stroke-dasharray:0;}#mermaid-0 .edge-thickness-invisible{stroke-width:0;fill:none;}#mermaid-0 .edge-pattern-dashed{stroke-dasharray:3;}#mermaid-0 .edge-pattern-dotted{stroke-dasharray:2;}#mermaid-0 .marker{fill:#666;stroke:#666;}#mermaid-0 .marker.cross{stroke:#666;}#mermaid-0 svg{font-family:arial,sans-serif;font-size:16px;}#mermaid-0 p{margin:0;}#mermaid-0 .label{font-family:arial,sans-serif;color:#000000;}#mermaid-0 .cluster-label text{fill:#333;}#mermaid-0 .cluster-label span{color:#333;}#mermaid-0 .cluster-label span p{background-color:transparent;}#mermaid-0 .label text,#mermaid-0 span{fill:#000000;color:#000000;}#mermaid-0 .node rect,#mermaid-0 .node circle,#mermaid-0 .node ellipse,#mermaid-0 .node polygon,#mermaid-0 .node path{fill:#eee;stroke:#999;stroke-width:1px;}#mermaid-0 .rough-node .label text,#mermaid-0 .node .label text,#mermaid-0 .image-shape .label,#mermaid-0 .icon-shape .label{text-anchor:middle;}#mermaid-0 .node .katex path{fill:#000;stroke:#000;stroke-width:1px;}#mermaid-0 .rough-node .label,#mermaid-0 .node .label,#mermaid-0 .image-shape .label,#mermaid-0 .icon-shape .label{text-align:center;}#mermaid-0 .node.clickable{cursor:pointer;}#mermaid-0 .root .anchor path{fill:#666!important;stroke-width:0;stroke:#666;}#mermaid-0 .arrowheadPath{fill:#333333;}#mermaid-0 .edgePath .path{stroke:#666;stroke-width:2.0px;}#mermaid-0 .flowchart-link{stroke:#666;fill:none;}#mermaid-0 .edgeLabel{background-color:white;text-align:center;}#mermaid-0 .edgeLabel p{background-color:white;}#mermaid-0 .edgeLabel rect{opacity:0.5;background-color:white;fill:white;}#mermaid-0 .labelBkg{background-color:rgba(255, 255, 255, 0.5);}#mermaid-0 .cluster rect{fill:hsl(0, 0%, 98.9215686275%);stroke:#707070;stroke-width:1px;}#mermaid-0 .cluster text{fill:#333;}#mermaid-0 .cluster span{color:#333;}#mermaid-0 div.mermaidTooltip{position:absolute;text-align:center;max-width:200px;padding:2px;font-family:arial,sans-serif;font-size:12px;background:hsl(-160, 0%, 93.3333333333%);border:1px solid #707070;border-radius:2px;pointer-events:none;z-index:100;}#mermaid-0 .flowchartTitleText{text-anchor:middle;font-size:18px;fill:#000000;}#mermaid-0 rect.text{fill:none;stroke-width:0;}#mermaid-0 .icon-shape,#mermaid-0 .image-shape{background-color:white;text-align:center;}#mermaid-0 .icon-shape p,#mermaid-0 .image-shape p{background-color:white;padding:2px;}#mermaid-0 .icon-shape rect,#mermaid-0 .image-shape rect{opacity:0.5;background-color:white;fill:white;}#mermaid-0 .label-icon{display:inline-block;height:1em;overflow:visible;vertical-align:-0.125em;}#mermaid-0 .node .label-icon path{fill:currentColor;stroke:revert;stroke-width:revert;}#mermaid-0 .node rect{fill:#fff;stroke:#ddd;stroke-width:2px;stroke-linejoin:round;}#mermaid-0 path.edge-thickness-normal{stroke:#ddd;stroke-width:2px;}#mermaid-0 .marker{stroke:#bbb!important;fill:#bbb!important;stroke-width:3px!important;}#mermaid-0 *{font-family:'Lora',sans-serif;}#mermaid-0 :root{--mermaid-font-family:arial,sans-serif;}</style><g><marker id="mermaid-0_flowchart-v2-pointEnd" class="marker flowchart-v2" viewBox="0 0 10 10" refX="5" refY="5" markerUnits="userSpaceOnUse" markerWidth="8" markerHeight="8" orient="auto"><path d="M 0 0 L 10 5 L 0 10 z" class="arrowMarkerPath" style="stroke-width: 1; stroke-dasharray: 1, 0;"></path></marker><marker id="mermaid-0_flowchart-v2-pointStart" class="marker flowchart-v2" viewBox="0 0 10 10" refX="4.5" refY="5" markerUnits="userSpaceOnUse" markerWidth="8" markerHeight="8" orient="auto"><path d="M 0 5 L 10 10 L 10 0 z" class="arrowMarkerPath" style="stroke-width: 1; stroke-dasharray: 1, 0;"></path></marker><marker id="mermaid-0_flowchart-v2-circleEnd" class="marker flowchart-v2" viewBox="0 0 10 10" refX="11" refY="5" markerUnits="userSpaceOnUse" markerWidth="11" markerHeight="11" orient="auto"><circle cx="5" cy="5" r="5" class="arrowMarkerPath" style="stroke-width: 1; stroke-dasharray: 1, 0;"></circle></marker><marker id="mermaid-0_flowchart-v2-circleStart" class="marker flowchart-v2" viewBox="0 0 10 10" refX="-1" refY="5" markerUnits="userSpaceOnUse" markerWidth="11" markerHeight="11" orient="auto"><circle cx="5" cy="5" r="5" class="arrowMarkerPath" style="stroke-width: 1; stroke-dasharray: 1, 0;"></circle></marker><marker id="mermaid-0_flowchart-v2-crossEnd" class="marker cross flowchart-v2" viewBox="0 0 11 11" refX="12" refY="5.2" markerUnits="userSpaceOnUse" markerWidth="11" markerHeight="11" orient="auto"><path d="M 1,1 l 9,9 M 10,1 l -9,9" class="arrowMarkerPath" style="stroke-width: 2; stroke-dasharray: 1, 0;"></path></marker><marker id="mermaid-0_flowchart-v2-crossStart" class="marker cross flowchart-v2" viewBox="0 0 11 11" refX="-1" refY="5.2" markerUnits="userSpaceOnUse" markerWidth="11" markerHeight="11" orient="auto"><path d="M 1,1 l 9,9 M 10,1 l -9,9" class="arrowMarkerPath" style="stroke-width: 2; stroke-dasharray: 1, 0;"></path></marker><g class="root"><g class="clusters"></g><g class="edgePaths"><path d="M185.695,62L177.746,68.167C169.797,74.333,153.898,86.667,145.949,98.333C138,110,138,121,138,126.5L138,132" id="L_U_D1_0" class="edge-thickness-normal edge-pattern-solid edge-thickness-normal edge-pattern-solid flowchart-link" style=";" data-edge="true" data-et="edge" data-id="L_U_D1_0" data-points="W3sieCI6MTg1LjY5NTMxMjUsInkiOjYyfSx7IngiOjEzOCwieSI6OTl9LHsieCI6MTM4LCJ5IjoxMzZ9XQ==" marker-end="url(#mermaid-0_flowchart-v2-pointEnd)"></path><path d="M138,214L138,220.167C138,226.333,138,238.667,138,250.333C138,262,138,273,138,278.5L138,284" id="L_D1_Q1_0" class="edge-thickness-normal edge-pattern-solid edge-thickness-normal edge-pattern-solid flowchart-link" style=";" data-edge="true" data-et="edge" data-id="L_D1_Q1_0" data-points="W3sieCI6MTM4LCJ5IjoyMTR9LHsieCI6MTM4LCJ5IjoyNTF9LHsieCI6MTM4LCJ5IjoyODh9XQ==" marker-end="url(#mermaid-0_flowchart-v2-pointEnd)"></path><path d="M138,342L138,348.167C138,354.333,138,366.667,138,378.333C138,390,138,401,138,406.5L138,412" id="L_Q1_S_0" class="edge-thickness-normal edge-pattern-solid edge-thickness-normal edge-pattern-solid flowchart-link" style=";" data-edge="true" data-et="edge" data-id="L_Q1_S_0" data-points="W3sieCI6MTM4LCJ5IjozNDJ9LHsieCI6MTM4LCJ5IjozNzl9LHsieCI6MTM4LCJ5Ijo0MTZ9XQ==" marker-end="url(#mermaid-0_flowchart-v2-pointEnd)"></path><path d="M166.088,511.287L175.157,522.135C184.225,532.983,202.363,554.679,211.431,571.027C220.5,587.375,220.5,598.375,220.5,603.875L220.5,609.375" id="L_S_A1_0" class="edge-thickness-normal edge-pattern-solid edge-thickness-normal edge-pattern-solid flowchart-link" style=";" data-edge="true" data-et="edge" data-id="L_S_A1_0" data-points="W3sieCI6MTY2LjA4ODEzMzgzOTI1NDksInkiOjUxMS4yODY4NjYxNjA3NDUxfSx7IngiOjIyMC41LCJ5Ijo1NzYuMzc1fSx7IngiOjIyMC41LCJ5Ijo2MTMuMzc1fV0=" marker-end="url(#mermaid-0_flowchart-v2-pointEnd)"></path><path d="M109.912,511.287L100.843,522.135C91.775,532.983,73.637,554.679,64.569,576.194C55.5,597.708,55.5,619.042,55.5,640.375C55.5,661.708,55.5,683.042,55.5,706.375C55.5,729.708,55.5,755.042,55.5,780.375C55.5,805.708,55.5,831.042,73.007,850.499C90.515,869.956,125.529,883.538,143.037,890.329L160.544,897.119" id="L_S_UI1_0" class="edge-thickness-normal edge-pattern-solid edge-thickness-normal edge-pattern-solid flowchart-link" style=";" data-edge="true" data-et="edge" data-id="L_S_UI1_0" data-points="W3sieCI6MTA5LjkxMTg2NjE2MDc0NTA4LCJ5Ijo1MTEuMjg2ODY2MTYwNzQ1MX0seyJ4Ijo1NS41LCJ5Ijo1NzYuMzc1fSx7IngiOjU1LjUsInkiOjY0MC4zNzV9LHsieCI6NTUuNSwieSI6NzA0LjM3NX0seyJ4Ijo1NS41LCJ5Ijo3ODAuMzc1fSx7IngiOjU1LjUsInkiOjg1Ni4zNzV9LHsieCI6MTY0LjI3MzQzNzUsInkiOjg5OC41NjU5MDkwOTA5MDkxfV0=" marker-end="url(#mermaid-0_flowchart-v2-pointEnd)"></path><path d="M220.5,667.375L220.5,673.542C220.5,679.708,220.5,692.042,220.5,703.708C220.5,715.375,220.5,726.375,220.5,731.875L220.5,737.375" id="L_A1_D2_0" class="edge-thickness-normal edge-pattern-solid edge-thickness-normal edge-pattern-solid flowchart-link" style=";" data-edge="true" data-et="edge" data-id="L_A1_D2_0" data-points="W3sieCI6MjIwLjUsInkiOjY2Ny4zNzV9LHsieCI6MjIwLjUsInkiOjcwNC4zNzV9LHsieCI6MjIwLjUsInkiOjc0MS4zNzV9XQ==" marker-end="url(#mermaid-0_flowchart-v2-pointEnd)"></path><path d="M220.5,819.375L220.5,825.542C220.5,831.708,220.5,844.042,220.5,855.708C220.5,867.375,220.5,878.375,220.5,883.875L220.5,889.375" id="L_D2_UI1_0" class="edge-thickness-normal edge-pattern-solid edge-thickness-normal edge-pattern-solid flowchart-link" style=";" data-edge="true" data-et="edge" data-id="L_D2_UI1_0" data-points="W3sieCI6MjIwLjUsInkiOjgxOS4zNzV9LHsieCI6MjIwLjUsInkiOjg1Ni4zNzV9LHsieCI6MjIwLjUsInkiOjg5My4zNzV9XQ==" marker-end="url(#mermaid-0_flowchart-v2-pointEnd)"></path><path d="M276.727,898.566L294.855,891.534C312.984,884.502,349.242,870.439,367.371,850.74C385.5,831.042,385.5,805.708,385.5,780.375C385.5,755.042,385.5,729.708,385.5,706.375C385.5,683.042,385.5,661.708,385.5,640.375C385.5,619.042,385.5,597.708,385.5,570.594C385.5,543.479,385.5,510.583,385.5,477.688C385.5,444.792,385.5,411.896,385.5,384.781C385.5,357.667,385.5,336.333,385.5,315C385.5,293.667,385.5,272.333,385.5,249C385.5,225.667,385.5,200.333,385.5,175C385.5,149.667,385.5,124.333,370.223,105.741C354.946,87.149,324.392,75.298,309.116,69.372L293.839,63.447" id="L_UI1_U_0" class="edge-thickness-normal edge-pattern-solid edge-thickness-normal edge-pattern-solid flowchart-link" style=";" data-edge="true" data-et="edge" data-id="L_UI1_U_0" data-points="W3sieCI6Mjc2LjcyNjU2MjUsInkiOjg5OC41NjU5MDkwOTA5MDkxfSx7IngiOjM4NS41LCJ5Ijo4NTYuMzc1fSx7IngiOjM4NS41LCJ5Ijo3ODAuMzc1fSx7IngiOjM4NS41LCJ5Ijo3MDQuMzc1fSx7IngiOjM4NS41LCJ5Ijo2NDAuMzc1fSx7IngiOjM4NS41LCJ5Ijo1NzYuMzc1fSx7IngiOjM4NS41LCJ5Ijo0NzcuNjg3NX0seyJ4IjozODUuNSwieSI6Mzc5fSx7IngiOjM4NS41LCJ5IjozMTV9LHsieCI6Mzg1LjUsInkiOjI1MX0seyJ4IjozODUuNSwieSI6MTc1fSx7IngiOjM4NS41LCJ5Ijo5OX0seyJ4IjoyOTAuMTA5Mzc1LCJ5Ijo2Mn1d" marker-end="url(#mermaid-0_flowchart-v2-pointEnd)"></path></g><g class="edgeLabels"><g class="edgeLabel" transform="translate(138, 99)"><g class="label" data-id="L_U_D1_0" transform="translate(-54.8671875, -12)"><foreignObject width="109.734375" height="24"><div xmlns="http://www.w3.org/1999/xhtml" class="labelBkg" style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;"><span class="edgeLabel"><p>e.g 'keydown +'</p></span></div></foreignObject></g></g><g class="edgeLabel" transform="translate(138, 251)"><g class="label" data-id="L_D1_Q1_0" transform="translate(-60.46875, -12)"><foreignObject width="120.9375" height="24"><div xmlns="http://www.w3.org/1999/xhtml" class="labelBkg" style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;"><span class="edgeLabel"><p>docToCqlQuery()</p></span></div></foreignObject></g></g><g class="edgeLabel" transform="translate(138, 379)"><g class="label" data-id="L_Q1_S_0" transform="translate(-25.34375, -12)"><foreignObject width="50.6875" height="24"><div xmlns="http://www.w3.org/1999/xhtml" class="labelBkg" style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;"><span class="edgeLabel"><p>parse()</p></span></div></foreignObject></g></g><g class="edgeLabel" transform="translate(220.5, 576.375)"><g class="label" data-id="L_S_A1_0" transform="translate(-13.0546875, -12)"><foreignObject width="26.109375" height="24"><div xmlns="http://www.w3.org/1999/xhtml" class="labelBkg" style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;"><span class="edgeLabel"><p>Yes</p></span></div></foreignObject></g></g><g class="edgeLabel" transform="translate(55.5, 704.375)"><g class="label" data-id="L_S_UI1_0" transform="translate(-10.2265625, -12)"><foreignObject width="20.453125" height="24"><div xmlns="http://www.w3.org/1999/xhtml" class="labelBkg" style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;"><span class="edgeLabel"><p>No</p></span></div></foreignObject></g></g><g class="edgeLabel" transform="translate(220.5, 704.375)"><g class="label" data-id="L_A1_D2_0" transform="translate(-60.015625, -12)"><foreignObject width="120.03125" height="24"><div xmlns="http://www.w3.org/1999/xhtml" class="labelBkg" style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;"><span class="edgeLabel"><p>cqlQueryToDoc()</p></span></div></foreignObject></g></g><g class="edgeLabel" transform="translate(220.5, 856.375)"><g class="label" data-id="L_D2_UI1_0" transform="translate(-24.453125, -12)"><foreignObject width="48.90625" height="24"><div xmlns="http://www.w3.org/1999/xhtml" class="labelBkg" style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;"><span class="edgeLabel"><p>apply()</p></span></div></foreignObject></g></g><g class="edgeLabel"><g class="label" data-id="L_UI1_U_0" transform="translate(0, 0)"><foreignObject width="0" height="0"><div xmlns="http://www.w3.org/1999/xhtml" class="labelBkg" style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;"><span class="edgeLabel"></span></div></foreignObject></g></g></g><g class="nodes"><g class="node default" id="flowchart-U-0" transform="translate(220.5, 35)"><rect class="basic label-container" style="" x="-83.359375" y="-27" width="166.71875" height="54"></rect><g class="label" style="" transform="translate(-53.359375, -12)"><rect></rect><foreignObject width="106.71875" height="24"><div xmlns="http://www.w3.org/1999/xhtml" style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;"><span class="nodeLabel"><p>New user input</p></span></div></foreignObject></g></g><g class="node default" id="flowchart-D1-1" transform="translate(138, 175)"><rect class="basic label-container" style="" x="-130" y="-39" width="260" height="78"></rect><g class="label" style="" transform="translate(-100, -24)"><rect></rect><foreignObject width="200" height="48"><div xmlns="http://www.w3.org/1999/xhtml" style="display: table; white-space: break-spaces; line-height: 1.5; max-width: 200px; text-align: center; width: 200px;"><span class="nodeLabel"><p>New document state (unparsed)</p></span></div></foreignObject></g></g><g class="node default" id="flowchart-Q1-3" transform="translate(138, 315)"><rect class="basic label-container" style="" x="-68.2421875" y="-27" width="136.484375" height="54"></rect><g class="label" style="" transform="translate(-38.2421875, -12)"><rect></rect><foreignObject width="76.484375" height="24"><div xmlns="http://www.w3.org/1999/xhtml" style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;"><span class="nodeLabel"><p>New query</p></span></div></foreignObject></g></g><g class="node default" id="flowchart-S-5" transform="translate(138, 477.6875)"><polygon points="61.6875,0 123.375,-61.6875 61.6875,-123.375 0,-61.6875" class="label-container" transform="translate(-61.1875, 61.6875)"></polygon><g class="label" style="" transform="translate(-34.6875, -12)"><rect></rect><foreignObject width="69.375" height="24"><div xmlns="http://www.w3.org/1999/xhtml" style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;"><span class="nodeLabel"><p>Success?</p></span></div></foreignObject></g></g><g class="node default" id="flowchart-A1-7" transform="translate(220.5, 640.375)"><rect class="basic label-container" style="" x="-63.3515625" y="-27" width="126.703125" height="54"></rect><g class="label" style="" transform="translate(-33.3515625, -12)"><rect></rect><foreignObject width="66.703125" height="24"><div xmlns="http://www.w3.org/1999/xhtml" style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;"><span class="nodeLabel"><p>New AST</p></span></div></foreignObject></g></g><g class="node default" id="flowchart-UI1-9" transform="translate(220.5, 920.375)"><rect class="basic label-container" style="" x="-56.2265625" y="-27" width="112.453125" height="54"></rect><g class="label" style="" transform="translate(-26.2265625, -12)"><rect></rect><foreignObject width="52.453125" height="24"><div xmlns="http://www.w3.org/1999/xhtml" style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;"><span class="nodeLabel"><p>New UI</p></span></div></foreignObject></g></g><g class="node default" id="flowchart-D2-11" transform="translate(220.5, 780.375)"><rect class="basic label-container" style="" x="-130" y="-39" width="260" height="78"></rect><g class="label" style="" transform="translate(-100, -24)"><rect></rect><foreignObject width="200" height="48"><div xmlns="http://www.w3.org/1999/xhtml" style="display: table; white-space: break-spaces; line-height: 1.5; max-width: 200px; text-align: center; width: 200px;"><span class="nodeLabel"><p>New document state (from parsed query)</p></span></div></foreignObject></g></g></g></g></g></svg></p>
<p>In code, this looks like:</p>
<p>// Code example of pm->cql, cql->pm, plugin code</p>
<p>As our scanner is currently implemented, this has the side-effect of normalising our input when it’s valid — extra whitespace at the start or end of queries, for example, is stripped out.</p>
<p>//</p>
<p>// Schema detail</p>
<p>A schema defines its content in a similar way to our grammar in <a href="/structured-search-ui-2">part 2</a>. In our grammar, on each line we declared a symbol, and a rule that defined the valid sequence(s) of terminal or nonterminals for that symbol. In our ProseMirror schema, for each node declaration, we’ll define a node name (the key within the <code class="language-text">nodes</code> object), and within the <code class="language-text">content</code> property of that node’s definition, we’ll define what’s permitted in the node. For now, our document can contain any number of <code class="language-text">text</code> nodes — the minimum we need to support plain text input.</p>
<p>The ecosystem provides a <a href="https://github.com/ProseMirror/prosemirror-schema-basic">basic schema</a> to get you started with rich text, but schemas can be large and expressive — the Guardian uses a schema with hundreds of node types to express the many different kinds of structured content their platform supports.</p>
<p>Structure:</p>
<p>Reminder of the feature set we’re implementing.</p>
<p>What we’ll need:</p>
<ul>
<li>parser</li>
<li>way to wrangle contenteditable</li>
<li>maybe a little introduction to Prosemirror</li>
<li>cute Venn diagram of my two skills</li>
</ul>
<p>Structure</p>
<p>Implement parts of structure, one after t’other</p>
<p>????</p>
<p>Profit</p>
<p><svg id="mermaid-1" width="100%" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" class="flowchart" style="max-width: 271.25390625px;" viewBox="0 0 271.25390625 710" role="graphics-document document" aria-roledescription="flowchart-v2"><style>#mermaid-1{font-family:arial,sans-serif;font-size:16px;fill:#000000;}@keyframes edge-animation-frame{from{stroke-dashoffset:0;}}@keyframes dash{to{stroke-dashoffset:0;}}#mermaid-1 .edge-animation-slow{stroke-dasharray:9,5!important;stroke-dashoffset:900;animation:dash 50s linear infinite;stroke-linecap:round;}#mermaid-1 .edge-animation-fast{stroke-dasharray:9,5!important;stroke-dashoffset:900;animation:dash 20s linear infinite;stroke-linecap:round;}#mermaid-1 .error-icon{fill:#552222;}#mermaid-1 .error-text{fill:#552222;stroke:#552222;}#mermaid-1 .edge-thickness-normal{stroke-width:1px;}#mermaid-1 .edge-thickness-thick{stroke-width:3.5px;}#mermaid-1 .edge-pattern-solid{stroke-dasharray:0;}#mermaid-1 .edge-thickness-invisible{stroke-width:0;fill:none;}#mermaid-1 .edge-pattern-dashed{stroke-dasharray:3;}#mermaid-1 .edge-pattern-dotted{stroke-dasharray:2;}#mermaid-1 .marker{fill:#666;stroke:#666;}#mermaid-1 .marker.cross{stroke:#666;}#mermaid-1 svg{font-family:arial,sans-serif;font-size:16px;}#mermaid-1 p{margin:0;}#mermaid-1 .label{font-family:arial,sans-serif;color:#000000;}#mermaid-1 .cluster-label text{fill:#333;}#mermaid-1 .cluster-label span{color:#333;}#mermaid-1 .cluster-label span p{background-color:transparent;}#mermaid-1 .label text,#mermaid-1 span{fill:#000000;color:#000000;}#mermaid-1 .node rect,#mermaid-1 .node circle,#mermaid-1 .node ellipse,#mermaid-1 .node polygon,#mermaid-1 .node path{fill:#eee;stroke:#999;stroke-width:1px;}#mermaid-1 .rough-node .label text,#mermaid-1 .node .label text,#mermaid-1 .image-shape .label,#mermaid-1 .icon-shape .label{text-anchor:middle;}#mermaid-1 .node .katex path{fill:#000;stroke:#000;stroke-width:1px;}#mermaid-1 .rough-node .label,#mermaid-1 .node .label,#mermaid-1 .image-shape .label,#mermaid-1 .icon-shape .label{text-align:center;}#mermaid-1 .node.clickable{cursor:pointer;}#mermaid-1 .root .anchor path{fill:#666!important;stroke-width:0;stroke:#666;}#mermaid-1 .arrowheadPath{fill:#333333;}#mermaid-1 .edgePath .path{stroke:#666;stroke-width:2.0px;}#mermaid-1 .flowchart-link{stroke:#666;fill:none;}#mermaid-1 .edgeLabel{background-color:white;text-align:center;}#mermaid-1 .edgeLabel p{background-color:white;}#mermaid-1 .edgeLabel rect{opacity:0.5;background-color:white;fill:white;}#mermaid-1 .labelBkg{background-color:rgba(255, 255, 255, 0.5);}#mermaid-1 .cluster rect{fill:hsl(0, 0%, 98.9215686275%);stroke:#707070;stroke-width:1px;}#mermaid-1 .cluster text{fill:#333;}#mermaid-1 .cluster span{color:#333;}#mermaid-1 div.mermaidTooltip{position:absolute;text-align:center;max-width:200px;padding:2px;font-family:arial,sans-serif;font-size:12px;background:hsl(-160, 0%, 93.3333333333%);border:1px solid #707070;border-radius:2px;pointer-events:none;z-index:100;}#mermaid-1 .flowchartTitleText{text-anchor:middle;font-size:18px;fill:#000000;}#mermaid-1 rect.text{fill:none;stroke-width:0;}#mermaid-1 .icon-shape,#mermaid-1 .image-shape{background-color:white;text-align:center;}#mermaid-1 .icon-shape p,#mermaid-1 .image-shape p{background-color:white;padding:2px;}#mermaid-1 .icon-shape rect,#mermaid-1 .image-shape rect{opacity:0.5;background-color:white;fill:white;}#mermaid-1 .label-icon{display:inline-block;height:1em;overflow:visible;vertical-align:-0.125em;}#mermaid-1 .node .label-icon path{fill:currentColor;stroke:revert;stroke-width:revert;}#mermaid-1 .node rect{fill:#fff;stroke:#ddd;stroke-width:2px;stroke-linejoin:round;}#mermaid-1 path.edge-thickness-normal{stroke:#ddd;stroke-width:2px;}#mermaid-1 .marker{stroke:#bbb!important;fill:#bbb!important;stroke-width:3px!important;}#mermaid-1 *{font-family:'Lora',sans-serif;}#mermaid-1 :root{--mermaid-font-family:arial,sans-serif;}</style><g><marker id="mermaid-1_flowchart-v2-pointEnd" class="marker flowchart-v2" viewBox="0 0 10 10" refX="5" refY="5" markerUnits="userSpaceOnUse" markerWidth="8" markerHeight="8" orient="auto"><path d="M 0 0 L 10 5 L 0 10 z" class="arrowMarkerPath" style="stroke-width: 1; stroke-dasharray: 1, 0;"></path></marker><marker id="mermaid-1_flowchart-v2-pointStart" class="marker flowchart-v2" viewBox="0 0 10 10" refX="4.5" refY="5" markerUnits="userSpaceOnUse" markerWidth="8" markerHeight="8" orient="auto"><path d="M 0 5 L 10 10 L 10 0 z" class="arrowMarkerPath" style="stroke-width: 1; stroke-dasharray: 1, 0;"></path></marker><marker id="mermaid-1_flowchart-v2-circleEnd" class="marker flowchart-v2" viewBox="0 0 10 10" refX="11" refY="5" markerUnits="userSpaceOnUse" markerWidth="11" markerHeight="11" orient="auto"><circle cx="5" cy="5" r="5" class="arrowMarkerPath" style="stroke-width: 1; stroke-dasharray: 1, 0;"></circle></marker><marker id="mermaid-1_flowchart-v2-circleStart" class="marker flowchart-v2" viewBox="0 0 10 10" refX="-1" refY="5" markerUnits="userSpaceOnUse" markerWidth="11" markerHeight="11" orient="auto"><circle cx="5" cy="5" r="5" class="arrowMarkerPath" style="stroke-width: 1; stroke-dasharray: 1, 0;"></circle></marker><marker id="mermaid-1_flowchart-v2-crossEnd" class="marker cross flowchart-v2" viewBox="0 0 11 11" refX="12" refY="5.2" markerUnits="userSpaceOnUse" markerWidth="11" markerHeight="11" orient="auto"><path d="M 1,1 l 9,9 M 10,1 l -9,9" class="arrowMarkerPath" style="stroke-width: 2; stroke-dasharray: 1, 0;"></path></marker><marker id="mermaid-1_flowchart-v2-crossStart" class="marker cross flowchart-v2" viewBox="0 0 11 11" refX="-1" refY="5.2" markerUnits="userSpaceOnUse" markerWidth="11" markerHeight="11" orient="auto"><path d="M 1,1 l 9,9 M 10,1 l -9,9" class="arrowMarkerPath" style="stroke-width: 2; stroke-dasharray: 1, 0;"></path></marker><g class="root"><g class="clusters"></g><g class="edgePaths"><path d="M150.8,62L144.155,68.167C137.51,74.333,124.22,86.667,117.575,98.333C110.93,110,110.93,121,110.93,126.5L110.93,132" id="L_U_D1_0" class="edge-thickness-normal edge-pattern-solid edge-thickness-normal edge-pattern-solid flowchart-link" style=";" data-edge="true" data-et="edge" data-id="L_U_D1_0" data-points="W3sieCI6MTUwLjc5OTk4Nzc5Mjk2ODc1LCJ5Ijo2Mn0seyJ4IjoxMTAuOTI5Njg3NSwieSI6OTl9LHsieCI6MTEwLjkyOTY4NzUsInkiOjEzNn1d" marker-end="url(#mermaid-1_flowchart-v2-pointEnd)"></path><path d="M110.93,190L110.93,196.167C110.93,202.333,110.93,214.667,110.93,226.333C110.93,238,110.93,249,110.93,254.5L110.93,260" id="L_D1_Q1_0" class="edge-thickness-normal edge-pattern-solid edge-thickness-normal edge-pattern-solid flowchart-link" style=";" data-edge="true" data-et="edge" data-id="L_D1_Q1_0" data-points="W3sieCI6MTEwLjkyOTY4NzUsInkiOjE5MH0seyJ4IjoxMTAuOTI5Njg3NSwieSI6MjI3fSx7IngiOjExMC45Mjk2ODc1LCJ5IjoyNjR9XQ==" marker-end="url(#mermaid-1_flowchart-v2-pointEnd)"></path><path d="M110.93,318L110.93,324.167C110.93,330.333,110.93,342.667,110.93,354.333C110.93,366,110.93,377,110.93,382.5L110.93,388" id="L_Q1_A1_0" class="edge-thickness-normal edge-pattern-solid edge-thickness-normal edge-pattern-solid flowchart-link" style=";" data-edge="true" data-et="edge" data-id="L_Q1_A1_0" data-points="W3sieCI6MTEwLjkyOTY4NzUsInkiOjMxOH0seyJ4IjoxMTAuOTI5Njg3NSwieSI6MzU1fSx7IngiOjExMC45Mjk2ODc1LCJ5IjozOTJ9XQ==" marker-end="url(#mermaid-1_flowchart-v2-pointEnd)"></path><path d="M110.93,446L110.93,452.167C110.93,458.333,110.93,470.667,110.93,482.333C110.93,494,110.93,505,110.93,510.5L110.93,516" id="L_A1_D2_0" class="edge-thickness-normal edge-pattern-solid edge-thickness-normal edge-pattern-solid flowchart-link" style=";" data-edge="true" data-et="edge" data-id="L_A1_D2_0" data-points="W3sieCI6MTEwLjkyOTY4NzUsInkiOjQ0Nn0seyJ4IjoxMTAuOTI5Njg3NSwieSI6NDgzfSx7IngiOjExMC45Mjk2ODc1LCJ5Ijo1MjB9XQ==" marker-end="url(#mermaid-1_flowchart-v2-pointEnd)"></path><path d="M110.93,574L110.93,580.167C110.93,586.333,110.93,598.667,117.086,610.547C123.242,622.426,135.555,633.853,141.712,639.566L147.868,645.279" id="L_D2_UI1_0" class="edge-thickness-normal edge-pattern-solid edge-thickness-normal edge-pattern-solid flowchart-link" style=";" data-edge="true" data-et="edge" data-id="L_D2_UI1_0" data-points="W3sieCI6MTEwLjkyOTY4NzUsInkiOjU3NH0seyJ4IjoxMTAuOTI5Njg3NSwieSI6NjExfSx7IngiOjE1MC43OTk5ODc3OTI5Njg3NSwieSI6NjQ4fV0=" marker-end="url(#mermaid-1_flowchart-v2-pointEnd)"></path><path d="M208.989,648L215.634,641.833C222.279,635.667,235.569,623.333,242.214,606.5C248.859,589.667,248.859,568.333,248.859,547C248.859,525.667,248.859,504.333,248.859,483C248.859,461.667,248.859,440.333,248.859,419C248.859,397.667,248.859,376.333,248.859,355C248.859,333.667,248.859,312.333,248.859,291C248.859,269.667,248.859,248.333,248.859,227C248.859,205.667,248.859,184.333,248.859,163C248.859,141.667,248.859,120.333,242.703,103.953C236.547,87.574,224.234,76.147,218.077,70.434L211.921,64.721" id="L_UI1_U_0" class="edge-thickness-normal edge-pattern-solid edge-thickness-normal edge-pattern-solid flowchart-link" style=";" data-edge="true" data-et="edge" data-id="L_UI1_U_0" data-points="W3sieCI6MjA4Ljk4OTA3NDcwNzAzMTI1LCJ5Ijo2NDh9LHsieCI6MjQ4Ljg1OTM3NSwieSI6NjExfSx7IngiOjI0OC44NTkzNzUsInkiOjU0N30seyJ4IjoyNDguODU5Mzc1LCJ5Ijo0ODN9LHsieCI6MjQ4Ljg1OTM3NSwieSI6NDE5fSx7IngiOjI0OC44NTkzNzUsInkiOjM1NX0seyJ4IjoyNDguODU5Mzc1LCJ5IjoyOTF9LHsieCI6MjQ4Ljg1OTM3NSwieSI6MjI3fSx7IngiOjI0OC44NTkzNzUsInkiOjE2M30seyJ4IjoyNDguODU5Mzc1LCJ5Ijo5OX0seyJ4IjoyMDguOTg5MDc0NzA3MDMxMjUsInkiOjYyfV0=" marker-end="url(#mermaid-1_flowchart-v2-pointEnd)"></path></g><g class="edgeLabels"><g class="edgeLabel" transform="translate(110.9296875, 99)"><g class="label" data-id="L_U_D1_0" transform="translate(-54.8671875, -12)"><foreignObject width="109.734375" height="24"><div xmlns="http://www.w3.org/1999/xhtml" class="labelBkg" style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;"><span class="edgeLabel"><p>e.g 'keydown +'</p></span></div></foreignObject></g></g><g class="edgeLabel" transform="translate(110.9296875, 227)"><g class="label" data-id="L_D1_Q1_0" transform="translate(-60.46875, -12)"><foreignObject width="120.9375" height="24"><div xmlns="http://www.w3.org/1999/xhtml" class="labelBkg" style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;"><span class="edgeLabel"><p>docToCqlQuery()</p></span></div></foreignObject></g></g><g class="edgeLabel" transform="translate(110.9296875, 355)"><g class="label" data-id="L_Q1_A1_0" transform="translate(-25.34375, -12)"><foreignObject width="50.6875" height="24"><div xmlns="http://www.w3.org/1999/xhtml" class="labelBkg" style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;"><span class="edgeLabel"><p>parse()</p></span></div></foreignObject></g></g><g class="edgeLabel" transform="translate(110.9296875, 483)"><g class="label" data-id="L_A1_D2_0" transform="translate(-60.015625, -12)"><foreignObject width="120.03125" height="24"><div xmlns="http://www.w3.org/1999/xhtml" class="labelBkg" style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;"><span class="edgeLabel"><p>cqlQueryToDoc()</p></span></div></foreignObject></g></g><g class="edgeLabel" transform="translate(110.9296875, 611)"><g class="label" data-id="L_D2_UI1_0" transform="translate(-24.453125, -12)"><foreignObject width="48.90625" height="24"><div xmlns="http://www.w3.org/1999/xhtml" class="labelBkg" style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;"><span class="edgeLabel"><p>apply()</p></span></div></foreignObject></g></g><g class="edgeLabel"><g class="label" data-id="L_UI1_U_0" transform="translate(0, 0)"><foreignObject width="0" height="0"><div xmlns="http://www.w3.org/1999/xhtml" class="labelBkg" style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;"><span class="edgeLabel"></span></div></foreignObject></g></g></g><g class="nodes"><g class="node default" id="flowchart-U-0" transform="translate(179.89453125, 35)"><rect class="basic label-container" style="" x="-83.359375" y="-27" width="166.71875" height="54"></rect><g class="label" style="" transform="translate(-53.359375, -12)"><rect></rect><foreignObject width="106.71875" height="24"><div xmlns="http://www.w3.org/1999/xhtml" style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;"><span class="nodeLabel"><p>New user input</p></span></div></foreignObject></g></g><g class="node default" id="flowchart-D1-1" transform="translate(110.9296875, 163)"><rect class="basic label-container" style="" x="-102.9296875" y="-27" width="205.859375" height="54"></rect><g class="label" style="" transform="translate(-72.9296875, -12)"><rect></rect><foreignObject width="145.859375" height="24"><div xmlns="http://www.w3.org/1999/xhtml" style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;"><span class="nodeLabel"><p>New document state</p></span></div></foreignObject></g></g><g class="node default" id="flowchart-Q1-3" transform="translate(110.9296875, 291)"><rect class="basic label-container" style="" x="-68.2421875" y="-27" width="136.484375" height="54"></rect><g class="label" style="" transform="translate(-38.2421875, -12)"><rect></rect><foreignObject width="76.484375" height="24"><div xmlns="http://www.w3.org/1999/xhtml" style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;"><span class="nodeLabel"><p>New query</p></span></div></foreignObject></g></g><g class="node default" id="flowchart-A1-5" transform="translate(110.9296875, 419)"><rect class="basic label-container" style="" x="-63.3515625" y="-27" width="126.703125" height="54"></rect><g class="label" style="" transform="translate(-33.3515625, -12)"><rect></rect><foreignObject width="66.703125" height="24"><div xmlns="http://www.w3.org/1999/xhtml" style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;"><span class="nodeLabel"><p>New AST</p></span></div></foreignObject></g></g><g class="node default" id="flowchart-D2-7" transform="translate(110.9296875, 547)"><rect class="basic label-container" style="" x="-102.9296875" y="-27" width="205.859375" height="54"></rect><g class="label" style="" transform="translate(-72.9296875, -12)"><rect></rect><foreignObject width="145.859375" height="24"><div xmlns="http://www.w3.org/1999/xhtml" style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;"><span class="nodeLabel"><p>New document state</p></span></div></foreignObject></g></g><g class="node default" id="flowchart-UI1-9" transform="translate(179.89453125, 675)"><rect class="basic label-container" style="" x="-56.2265625" y="-27" width="112.453125" height="54"></rect><g class="label" style="" transform="translate(-26.2265625, -12)"><rect></rect><foreignObject width="52.453125" height="24"><div xmlns="http://www.w3.org/1999/xhtml" style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;"><span class="nodeLabel"><p>New UI</p></span></div></foreignObject></g></g></g></g></g></svg></p></section><hr style="margin-bottom:1.5rem"/></article><nav><ul style="display:flex;flex-wrap:wrap;justify-content:space-between;list-style:none;padding:0"><li><a rel="prev" href="/structured-search-ui-5/">← <!-- -->Structured search queries for web UIs, part 5: the interface, foundations</a></li><li></li></ul></nav></main><footer style="margin-top:auto"><div style="display:flex;align-items:center;margin-top:1.5rem"><div data-gatsby-image-wrapper="" style="margin-right:0.75rem;margin-bottom:0;min-width:50px;border-radius:100%" class="gatsby-image-wrapper gatsby-image-wrapper-constrained"><div style="max-width:50px;display:block"><img alt="" role="presentation" aria-hidden="true" src="data:image/svg+xml;charset=utf-8,%3Csvg%20height=&#x27;50&#x27;%20width=&#x27;50&#x27;%20xmlns=&#x27;http://www.w3.org/2000/svg&#x27;%20version=&#x27;1.1&#x27;%3E%3C/svg%3E" style="max-width:100%;display:block;position:static"/></div><div aria-hidden="true" data-placeholder-image="" style="opacity:1;transition:opacity 500ms linear;background-color:#282828;position:absolute;top:0;left:0;bottom:0;right:0"></div><picture><source type="image/webp" data-srcset="/static/8c486420c9f37beb177f816e3e972b25/68795/profile-pic.webp 13w,/static/8c486420c9f37beb177f816e3e972b25/2fa99/profile-pic.webp 25w,/static/8c486420c9f37beb177f816e3e972b25/dbc4a/profile-pic.webp 50w,/static/8c486420c9f37beb177f816e3e972b25/d8057/profile-pic.webp 100w" sizes="(min-width: 50px) 50px, 100vw"/><img data-gatsby-image-ssr="" data-main-image="" style="border-radius:50%;opacity:0" sizes="(min-width: 50px) 50px, 100vw" decoding="async" loading="lazy" data-src="/static/8c486420c9f37beb177f816e3e972b25/6ac16/profile-pic.jpg" data-srcset="/static/8c486420c9f37beb177f816e3e972b25/4b206/profile-pic.jpg 13w,/static/8c486420c9f37beb177f816e3e972b25/74ef0/profile-pic.jpg 25w,/static/8c486420c9f37beb177f816e3e972b25/6ac16/profile-pic.jpg 50w,/static/8c486420c9f37beb177f816e3e972b25/e07e1/profile-pic.jpg 100w" alt="Jonathon Herbert"/></picture><noscript><picture><source type="image/webp" srcSet="/static/8c486420c9f37beb177f816e3e972b25/68795/profile-pic.webp 13w,/static/8c486420c9f37beb177f816e3e972b25/2fa99/profile-pic.webp 25w,/static/8c486420c9f37beb177f816e3e972b25/dbc4a/profile-pic.webp 50w,/static/8c486420c9f37beb177f816e3e972b25/d8057/profile-pic.webp 100w" sizes="(min-width: 50px) 50px, 100vw"/><img data-gatsby-image-ssr="" data-main-image="" style="border-radius:50%;opacity:0" sizes="(min-width: 50px) 50px, 100vw" decoding="async" loading="lazy" src="/static/8c486420c9f37beb177f816e3e972b25/6ac16/profile-pic.jpg" srcSet="/static/8c486420c9f37beb177f816e3e972b25/4b206/profile-pic.jpg 13w,/static/8c486420c9f37beb177f816e3e972b25/74ef0/profile-pic.jpg 25w,/static/8c486420c9f37beb177f816e3e972b25/6ac16/profile-pic.jpg 50w,/static/8c486420c9f37beb177f816e3e972b25/e07e1/profile-pic.jpg 100w" alt="Jonathon Herbert"/></picture></noscript><script type="module">const t="undefined"!=typeof HTMLImageElement&&"loading"in HTMLImageElement.prototype;if(t){const t=document.querySelectorAll("img[data-main-image]");for(let e of t){e.dataset.src&&(e.setAttribute("src",e.dataset.src),e.removeAttribute("data-src")),e.dataset.srcset&&(e.setAttribute("srcset",e.dataset.srcset),e.removeAttribute("data-srcset"));const t=e.parentNode.querySelectorAll("source[data-srcset]");for(let e of t)e.setAttribute("srcset",e.dataset.srcset),e.removeAttribute("data-srcset");e.complete&&(e.style.opacity=1,e.parentNode.parentNode.querySelector("[data-placeholder-image]").style.opacity=0)}}</script></div><p style="margin-bottom:0;font-size:0.8em">Written by <strong>Jonathon Herbert</strong>.<!-- --> <!-- -->Follow him on<!-- --> <a href="https://twitter.com/js_herbert">Twitter</a>, or look upon his works on<!-- --> <a href="https://github.com/jonathonherbert">Github</a>.</p></div></footer></div></div><div id="gatsby-announcer" style="position:absolute;top:0;width:1px;height:1px;padding:0;overflow:hidden;clip:rect(0, 0, 0, 0);white-space:nowrap;border:0" aria-live="assertive" aria-atomic="true"></div></div><script id="gatsby-script-loader">/*<![CDATA[*/window.pagePath="/structured-search-ui-6/";/*]]>*/</script><!-- slice-start id="_gatsby-scripts-1" -->
          <script
            id="gatsby-chunk-mapping"
          >
            window.___chunkMapping="{\"app\":[\"/app-09402a4c01576a38cd5e.js\"],\"component---src-pages-404-js\":[\"/component---src-pages-404-js-fe2ed841316dca0cad80.js\"],\"component---src-pages-index-js\":[\"/component---src-pages-index-js-3954d1123bec1d58e166.js\"],\"component---src-templates-blog-post-js\":[\"/component---src-templates-blog-post-js-028ece1662cef2778d03.js\"]}";
          </script>
        <script>window.___webpackCompilationHash="d350b32360d747d5c43d";</script><script src="/webpack-runtime-4e396e3377d7325234c8.js" async></script><script src="/framework-e0e5fad7f961d61cb6c1.js" async></script><script src="/app-09402a4c01576a38cd5e.js" async></script><!-- slice-end id="_gatsby-scripts-1" --></body></html>